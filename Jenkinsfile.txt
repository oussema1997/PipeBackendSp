pipeline {
    agent any

    stages {

        stage('Build') {
            steps {
                script {
                     sh 'mvn clean package'
                }
            }
        }

 stage('Deploy') {
            steps {
                script {
         
                    nexusArtifactUploader(
                        nexusVersion: 'nexus3',
                        protocol: 'http',
                        nexusUrl: nexusUrl,
                        groupId: pom.groupId,
                        version: pom.version,
                        repository: 'maven-releases',
                        credentialsId: server,
                        username : 'admin',
                        artifacts: [
                            [artifactId: artifact,
                             classifier: '',
                             file: artifact,
                             type: 'jar']
                        ]
                    )
                }
            }
        }
    }
    
}